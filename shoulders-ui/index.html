<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Shoulders Developer Portal</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="bg-grid"></div>
    <header class="topbar">
      <div class="brand">
        <div class="logo">S</div>
        <div>
          <div class="brand-title">Shoulders</div>
          <div class="brand-sub">Developer Portal</div>
        </div>
      </div>
      <nav class="nav">
        <a href="#overview" class="nav-link">Overview</a>
        <a href="#catalog" class="nav-link">Catalog</a>
        <a href="#deploy" class="nav-link">Deploy</a>
        <a href="#observability" class="nav-link">Observability</a>
        <a href="#docs" class="nav-link">Docs</a>
        <a href="#teams" class="nav-link">Teams</a>
      </nav>
      <div class="top-actions">
        <div class="context-switcher">
          <select id="context-select"></select>
          <button class="ghost" id="context-apply" type="button">Use Context</button>
        </div>
        <button class="ghost" id="toggle-status">Platform: Healthy</button>
      </div>
    </header>

    <main>
      <div class="banner hidden" id="api-warning"></div>
      <section id="overview" class="section hero">
        <div class="hero-text">
          <p class="eyebrow">Internal Developer Platform</p>
          <h1>Build, ship, and observe workloads without leaving the platform.</h1>
          <p class="lead">
            Shoulders brings Crossplane, FluxCD, Cilium, and a full observability stack into a
            single, developer-friendly portal. Discover services, deploy apps, and trace issues
            with a single workflow.
          </p>
          <div class="hero-actions">
            <button class="primary" data-jump="#deploy">Start a Deploy</button>
            <button class="secondary" data-jump="#catalog">Explore Catalog</button>
          </div>
        </div>
        <div class="hero-card">
          <div class="hero-card-header">Platform Snapshot</div>
          <div class="hero-card-body">
            <div class="stat">
              <span class="stat-label">Active Workspaces</span>
              <span class="stat-value" id="stat-workspaces">0</span>
            </div>
            <div class="stat">
              <span class="stat-label">Running Apps</span>
              <span class="stat-value" id="stat-apps">0</span>
            </div>
            <div class="stat">
              <span class="stat-label">State Stores</span>
              <span class="stat-value" id="stat-stores">0</span>
            </div>
            <div class="stat">
              <span class="stat-label">Event Streams</span>
              <span class="stat-value" id="stat-streams">0</span>
            </div>
            <div class="stat">
              <span class="stat-label">Kube Context</span>
              <span class="stat-value mono" id="stat-context">unknown</span>
            </div>
            <div class="pill" id="stat-gitops">GitOps: FluxCD connected</div>
          </div>
        </div>
      </section>

      <section id="catalog" class="section">
        <div class="section-head">
          <h2>Service Catalog</h2>
          <p class="muted">Browse the abstractions available for teams and workloads.</p>
        </div>
        <div class="catalog-filters">
          <input type="text" id="catalog-search" placeholder="Search resources..." />
          <select id="catalog-namespace">
            <option value="">All namespaces</option>
          </select>
          <button class="secondary" id="catalog-refresh" type="button">Refresh</button>
        </div>
        <div class="catalog-grid" id="catalog-grid"></div>
      </section>

      <section id="deploy" class="section">
        <div class="section-head">
          <h2>Deploy Wizard</h2>
          <p class="muted">Generate platform-ready YAML for your next workload.</p>
        </div>
        <div class="deploy-grid">
          <form class="deploy-form" id="deploy-form">
            <label>
              Resource Type
              <select id="resource-kind">
                <option value="Workspace">Workspace</option>
                <option value="WebApplication">WebApplication</option>
                <option value="StateStore">StateStore</option>
                <option value="EventStream">EventStream</option>
              </select>
            </label>
            <label id="namespace-field">
              Workspace / Namespace
              <input type="text" id="resource-namespace" value="team-a" />
            </label>
            <label id="resource-name-field">
              <span id="resource-name-label">Resource Name</span>
              <input type="text" id="resource-name" value="my-app" />
              <span class="note hidden" id="resource-name-note">Workspace name becomes the namespace.</span>
            </label>
            <div class="note hidden" id="workspace-name-preview"></div>
            <div class="form-split hidden" id="webapp-fields">
              <label>
                Image
                <input type="text" id="resource-image" value="nginx" />
              </label>
              <label>
                Tag
                <input type="text" id="resource-tag" value="latest" />
              </label>
            </div>
            <div class="form-split hidden" id="webapp-scale-fields">
              <label>
                Replicas
                <input type="number" id="resource-replicas" min="1" value="2" />
              </label>
              <label>
                Host
                <input type="text" id="resource-host" value="my-app.example.com" />
              </label>
            </div>
            <div class="form-split hidden" id="state-store-fields">
              <label>
                Database Name
                <input type="text" id="resource-database" value="team-a-01" />
              </label>
            </div>
            <div class="form-split hidden" id="event-stream-fields">
              <label>
                Topic Name
                <input type="text" id="resource-topic" value="events" />
              </label>
              <label>
                Partitions
                <input type="number" id="resource-partitions" min="1" value="3" />
              </label>
            </div>
            <button class="primary" type="submit">Generate YAML</button>
          </form>
          <div class="deploy-output">
            <div class="deploy-output-header">
              <span>Preview</span>
              <div class="deploy-actions">
                <button class="ghost" id="copy-yaml">Copy</button>
                <button class="primary" id="apply-yaml" type="button">Apply</button>
              </div>
            </div>
            <pre id="yaml-output"></pre>
            <div class="note" id="apply-status">Not applied yet.</div>
          </div>
        </div>
      </section>

      <section id="observability" class="section">
        <div class="section-head">
          <h2>Observability</h2>
          <p class="muted">Embed Grafana dashboards or jump directly into logs and traces.</p>
        </div>
        <div class="observe-grid">
          <div class="observe-card">
            <h3>Grafana Embed</h3>
            <p class="muted">
              Provide a dashboard URL to view it inline. Ideal for team health and SLO views.
            </p>
            <label>
              Grafana Dashboard URL
              <input type="text" id="grafana-url" placeholder="http://localhost:3000/d/...." />
            </label>
            <button class="secondary" id="load-grafana">Load Dashboard</button>
            <div class="note">Tip: Use <span class="mono">shoulders dashboard</span> to port-forward.</div>
          </div>
          <div class="observe-embed" id="grafana-embed">
            <div class="embed-placeholder">
              <div class="pulse"></div>
              <p>Grafana embed will appear here.</p>
            </div>
          </div>
        </div>
      </section>

      <section id="docs" class="section">
        <div class="section-head">
          <h2>Documentation</h2>
          <p class="muted">Handy links for platform concepts and onboarding.</p>
        </div>
        <div class="docs-grid" id="docs-grid"></div>
      </section>

      <section id="teams" class="section">
        <div class="section-head">
          <h2>Team Management</h2>
          <p class="muted">Track team ownership, quotas, and onboarding progress.</p>
        </div>
        <div class="teams-grid" id="teams-grid"></div>
        <div class="invite-card">
          <h3>Invite a teammate</h3>
          <p class="muted">Create a workspace invite and assign a default role.</p>
          <div class="invite-form">
            <input type="email" id="invite-email" placeholder="name@company.com" />
            <select id="invite-role">
              <option value="developer">Developer</option>
              <option value="owner">Owner</option>
              <option value="viewer">Viewer</option>
            </select>
            <button class="primary" id="send-invite">Send Invite</button>
          </div>
          <div class="note" id="invite-status">No pending invites.</div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div>Shoulders IDP · Powered by Crossplane + FluxCD + Cilium</div>
      <div class="mono">Version 0.1 · Local portal prototype</div>
    </footer>

    <script src="app.js"></script>
  </body>
</html>
